<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>SAS学习心得 | My blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="《SAS编程演义》笔记清歌苦调两不厌：夯实基础
如何让SAS自动加载永久逻辑库
如果想要让SAS语句建立的永久库在启动后就能看到，可以把包含LIBNAME语句的程序命名为autoexe.sas，并放入和sas.exe同级的目录中，此后每次SAS启动时会自动运行autosas.exe程序。
通过工具按钮建立永久库时，可以在建立时勾上Enable at startup，下次启动SAS时就会自动加载这个">
<meta property="og:type" content="article">
<meta property="og:title" content="SAS学习心得">
<meta property="og:url" content="http://wu-yuanyi.github.io/2017/06/16/study sas/index.html">
<meta property="og:site_name" content="My blog">
<meta property="og:description" content="《SAS编程演义》笔记清歌苦调两不厌：夯实基础
如何让SAS自动加载永久逻辑库
如果想要让SAS语句建立的永久库在启动后就能看到，可以把包含LIBNAME语句的程序命名为autoexe.sas，并放入和sas.exe同级的目录中，此后每次SAS启动时会自动运行autosas.exe程序。
通过工具按钮建立永久库时，可以在建立时勾上Enable at startup，下次启动SAS时就会自动加载这个">
<meta property="og:updated_time" content="2017-09-04T02:07:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SAS学习心得">
<meta name="twitter:description" content="《SAS编程演义》笔记清歌苦调两不厌：夯实基础
如何让SAS自动加载永久逻辑库
如果想要让SAS语句建立的永久库在启动后就能看到，可以把包含LIBNAME语句的程序命名为autoexe.sas，并放入和sas.exe同级的目录中，此后每次SAS启动时会自动运行autosas.exe程序。
通过工具按钮建立永久库时，可以在建立时勾上Enable at startup，下次启动SAS时就会自动加载这个">
  
    <link rel="alternate" href="/atom.xml" title="My blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">My blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://wu-yuanyi.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-study sas" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/16/study sas/" class="article-date">
  <time datetime="2017-06-16T01:22:15.000Z" itemprop="datePublished">2017-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      SAS学习心得
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="《SAS编程演义》笔记"><a href="#《SAS编程演义》笔记" class="headerlink" title="《SAS编程演义》笔记"></a>《SAS编程演义》笔记</h1><h2 id="清歌苦调两不厌：夯实基础"><a href="#清歌苦调两不厌：夯实基础" class="headerlink" title="清歌苦调两不厌：夯实基础"></a>清歌苦调两不厌：夯实基础</h2><blockquote>
<h3 id="如何让SAS自动加载永久逻辑库"><a href="#如何让SAS自动加载永久逻辑库" class="headerlink" title="如何让SAS自动加载永久逻辑库"></a>如何让SAS自动加载永久逻辑库</h3><ol>
<li>如果想要让SAS语句建立的永久库在启动后就能看到，可以把包含LIBNAME语句的程序命名为autoexe.sas，并放入和sas.exe同级的目录中，此后每次SAS启动时会自动运行autosas.exe程序。</li>
<li>通过工具按钮建立永久库时，可以在建立时勾上<em>Enable at startup</em>，下次启动SAS时就会自动加载这个永久库。</li>
</ol>
<h3 id="为什么又了数据文件还要视图"><a href="#为什么又了数据文件还要视图" class="headerlink" title="为什么又了数据文件还要视图"></a>为什么又了数据文件还要视图</h3><p>视图是依据查询语句动态生成，因此视图本身几乎不占据存储空间。利用视图可以节约硬盘空间。两者在世界内容效果方面是一样的。</p>
<h3 id="日期与时间的本质"><a href="#日期与时间的本质" class="headerlink" title="日期与时间的本质"></a>日期与时间的本质</h3><ol>
<li>日期实际存储的是距离1960年1月1日的天数</li>
<li>时间是距离凌晨的秒数</li>
</ol>
<h3 id="打破SAS命名规则"><a href="#打破SAS命名规则" class="headerlink" title="打破SAS命名规则"></a>打破SAS命名规则</h3><p>修改系统选项<code>VALIDMEMNAME</code>和<code>VALIDVARNAME</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">options VALIDMEMNAME=extend VALIDVARNAME=any;</div><div class="line">data 中文名演示;</div><div class="line">    SAS中文变量名 = &quot;YES&quot;;</div><div class="line">    SAS中文變量名 = &quot;YES&quot;;</div><div class="line">    &apos;2SAS中文变量名&apos;n = &quot;YES&quot;;</div><div class="line">    &apos;SAS空格 #@%特殊字符变量名&apos;n = &quot;YES&quot;;</div><div class="line">run;</div></pre></td></tr></table></figure></p>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><ul>
<li>不等于 ^= ~= </li>
<li>两者取小 &gt;&lt;</li>
<li>两者取大 &lt;&gt;</li>
<li>连接运算符 ||</li>
<li>与 &amp; and</li>
<li>或 ! | or</li>
<li>非 ^ ~ not</li>
</ul>
<h3 id="IF-ELSE配合DO-END"><a href="#IF-ELSE配合DO-END" class="headerlink" title="IF-ELSE配合DO-END"></a>IF-ELSE配合DO-END</h3><p>希望执行的不仅仅是一个动作，而是多个动作，此时可以在关键词THEN后面用夹板语句DO-END，把多个动作整合在DO-END中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">data male female;</div><div class="line">  set sashelp.class;</div><div class="line">       if sex=&apos;M&apos; then do; gender=&apos;Male&apos;; output male; end;</div><div class="line">  else if sex=&apos;F&apos; then do; gender=&apos;Female&apos;; output female; end;</div><div class="line">  else put &apos;Invalid sex :&apos; sex;</div><div class="line">run;</div></pre></td></tr></table></figure></p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><ul>
<li>DO-END</li>
<li>DO-WHILE</li>
<li>DO-UNTIL<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">data random;</div><div class="line">    do i=1 to 10;</div><div class="line">        r=rannor(23);</div><div class="line">        output;</div><div class="line">    end;</div><div class="line">run;</div><div class="line"></div><div class="line">data dowhile;</div><div class="line">    i=0;</div><div class="line">    do while(i&lt;5);</div><div class="line">        i+1;</div><div class="line">        output;</div><div class="line">    end;</div><div class="line">run;</div><div class="line"></div><div class="line">data dountil;</div><div class="line">    i=0;</div><div class="line">    do until(i&gt;=5);</div><div class="line">        i+1;</div><div class="line">        output;</div><div class="line">    end;</div><div class="line">run;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="数组结构"><a href="#数组结构" class="headerlink" title="数组结构"></a>数组结构</h3><ul>
<li>数组中的变量必须有相同的数据类型</li>
<li><code>ARRAY array-name {number-of-elements} &lt;$&gt; &lt;length&gt; &lt;array-elements&gt; &lt;(initial-value-list)&gt;</code></li>
<li>元素个数可以用{*}代替，让SAS自动计数；可以指定具体的数字，如{7}；可以指定一定的数字范围，如{1:7}</li>
<li>元素名可以是变量名也可以是SAS自定义变量，如_ALL_（变量类型需相同，_NUMERIC_，_CHARACTER_，_TEMPORARY_（临时变量）</li>
<li>&lt;&gt;中的内容并非必须有。如$和length只有在数组元素为字符型时才用到。</li>
</ul>
<p>PDV与DATA步自循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">data demoPDV;</div><div class="line">    put &quot;第&quot; _n_ &quot;次前运行：&quot; _all_;</div><div class="line">    input ID $  Chiness  Math  English;</div><div class="line">    Sum = Chiness + Math + English;</div><div class="line">    put &quot;第&quot; _n_ &quot;次后运行：&quot; _all_;</div><div class="line">datalines;</div><div class="line">S001 80 99 93</div><div class="line">S002 90 85 95</div><div class="line">S003 83 88 81</div><div class="line">;</div><div class="line">run;</div></pre></td></tr></table></figure></p>
<h3 id="与"><a href="#与" class="headerlink" title="@与@@"></a>@与@@</h3><ul>
<li>当DATALINES数据行里要读入的数据列数=要读入的变量数，也就是说一行就是一条观测时，无尾。</li>
<li>当DATALINES数据行里要读入的数据列数&gt;要读入的变量数，而且是整数倍时，也就是说一行=K*数条观测(K为&gt;=1的整数)，用@@。</li>
<li>当一个DATA步里有多个INPUT语句时，我们需要单尾@。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">* 数据列数=变量数</div><div class="line">data test1;</div><div class="line">    input id x y z;</div><div class="line">    datalines;</div><div class="line">    1 98 99 97</div><div class="line">    2 93 91 92</div><div class="line">    ;</div><div class="line">run;</div><div class="line"></div><div class="line">* 数据列数=变量数，多个input语句</div><div class="line">data test2;</div><div class="line">    input id@;</div><div class="line">    input x@;</div><div class="line">    input y@;</div><div class="line">    input z@;</div><div class="line">    datalines;</div><div class="line">    1 98 99 97</div><div class="line">    2 93 91 92</div><div class="line">    ;</div><div class="line">run;</div><div class="line"></div><div class="line">* 数据列数=k*变量数</div><div class="line">data test3;</div><div class="line">    input id x y z @@;</div><div class="line">    datalines;</div><div class="line">    1 98 99 97 2 93 91 92;</div><div class="line">run;</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li>无尾Hold不住立即跳</li>
<li>一尾(@)Hold住当前INPUT语句不跳，但若刚好是DATA步最后一个INPUT语句，跳。</li>
<li>二尾(@@)打死都不跳。</li>
<li>最后，无论多少尾，数据行末尾必定自动跳。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">data test;</div><div class="line">    input x @;</div><div class="line">    input y;</div><div class="line">    input @@;</div><div class="line">datalines;</div><div class="line">1 2 3</div><div class="line">4 5 6</div><div class="line">7</div><div class="line">;</div><div class="line">run;</div><div class="line"></div><div class="line">data test;</div><div class="line">    input x;</div><div class="line">    input y @@;</div><div class="line">    input z @;</div><div class="line">datalines;</div><div class="line">1 2 3</div><div class="line">4 5 6</div><div class="line">7</div><div class="line">;</div><div class="line">run;</div></pre></td></tr></table></figure>
<hr>
<h2 id="苔点狂吞纳线青：读取数据"><a href="#苔点狂吞纳线青：读取数据" class="headerlink" title="苔点狂吞纳线青：读取数据"></a>苔点狂吞纳线青：读取数据</h2><blockquote>
<h3 id="读取方式"><a href="#读取方式" class="headerlink" title="读取方式"></a>读取方式</h3><ul>
<li>LIBNAME语句</li>
<li>SQL直通设施(SQL pss-through facility)</li>
<li>ACCESS/DBLOAD过程，已不推荐</li>
<li>IMPORT/EXPORT过程</li>
<li>INFILE+INPUT语句</li>
<li>INPUT+DATALINES语句</li>
<li>IO函数</li>
</ul>
<h3 id="LIBNAME访问DBMS数据文件"><a href="#LIBNAME访问DBMS数据文件" class="headerlink" title="LIBNAME访问DBMS数据文件"></a>LIBNAME访问DBMS数据文件</h3><p><strong>LIBNAME</strong> <em>libref</em> <em>engine-name</em> <em><sas access-connection-options=""></sas></em> <em><sas access-libname-options=""></sas></em>;<br><code>libname mydb2 db2 user=yuanyi password=&quot;wuyuanyi&quot; datasrc=datadb</code></p>
<ul>
<li>libref: 逻辑库名，其实是存放数据表和视图的DBMS数据库、架构、服务器端别名</li>
<li>engine-name: 引擎名,不同的DMBS数据文件需要指定不同的引擎名，入oracle、db2等</li>
<li>SAS/ACCESS 连接选项，常用的如用户名，密码等，不同的DMBS数据文件会有所不同</li>
<li>SAS／ACCESS 逻辑库选项，控制SAS处理DBMS对象的方式，不同的DBMS数据文件会有所不同</li>
</ul>
<h3 id="PROC-IMPORT语法"><a href="#PROC-IMPORT语法" class="headerlink" title="PROC IMPORT语法"></a>PROC IMPORT语法</h3><p><strong>PROC IMPORT</strong></p>
</blockquote>
<p><strong>DATAFILE</strong> = <em>“filename”</em>|<strong>DATATABLE</strong> = <em>“tablename”(Not used for Microsoft Excel files)</em></p>
<dbms =="" *data-source-identifier*="">

<p><out =="" *libref.sas="" data-set-name*=""> &lt;<em>SAS data-set-option(s)</em>&gt;</out></p>
<p>\<replace></replace></p>
<p>&lt;<em>file-format-specofoc-statements</em>&gt;;</p>
<p><strong>RUN</strong>;</p>
<ul>
<li>filename: 欲读入的文件，包括路径、文件名以及扩展名（如：d:\mydata.xls），当然也可以用之前定义的fileref</li>
<li>data source identifier: 一般情况下与文件扩展名一致，.mdb、.dbf、.dat、.sav等。如果是excel文件，建议用Excel</li>
<li><out句>: 读入数据后存放的SAS数据库和数据集名称</out句></li>
<li><sas data-set-option(s)="">: 对保存的数据进行数据集读写，变量筛选，观测筛选等方面的控制<ul>
<li>PW=选项加密数据集</li>
<li>READ=、WRITE=、ALTER=选项分别加密读、写以及修改权限</li>
<li>KEEP=、DROP=、RENAME=选项筛选、重命名变量</li>
<li>OBS=、WHERE=筛选保留的观测</li>
</ul>
</sas></li>
<li>\<replace>: 重复运行时替换掉同名数据集</replace></li>
<li>\<file-format-specific-statements>: 对分隔符分隔的文件（如CSV文件）、EXCEL文件、Access数据文件、dBase数据文件、Paradox数据文件、SPSS以及Stata数据文件做更详细的读取设置</file-format-specific-statements></li>
<li>对于分隔符分隔的文件<ul>
<li>DATAROW=n 指定数据从第n行开始</li>
<li>GETNAMES=YES|NO 应对数据文件首行是不是变量名</li>
<li>GUESSINGROWS=n|MAX 应对仅用默认头20行数据无法判断变量类型和长度的情况</li>
<li>DELIMITER=‘char’|’nn’x 个性化指定数据文件的分隔符，如DELIMITER=‘#’|‘20’x(十六进制ascii码的空格)</li>
</ul>
</li>
<li>对于EXCEL文件<ul>
<li>SHEET=EXCEL文件中特定的sheet</li>
<li>RANGE=读入某sheet中特定的数据区域</li>
</ul>
</li>
</ul>
<blockquote>
<h3 id="LIBNAME访问PC文件语法"><a href="#LIBNAME访问PC文件语法" class="headerlink" title="LIBNAME访问PC文件语法"></a>LIBNAME访问PC文件语法</h3><p><strong>LIBNAME</strong> &lt;<em>libref</em>&gt; &lt;<em>engine-name</em>&gt; &lt;<em>‘physical-path and filename.ext’</em>&gt; &lt;<em>SAS/ACCESS-engine-connection-options</em>&gt; &lt;<em>SAS/ACCESS LIBNAME-options</em>&gt;;</p>
<ul>
<li>libref: 逻辑库名，其实是存放数据表和视图的DBMS数据库、架构、服务器端别名</li>
<li>engine-name: 引擎名,不同的DMBS数据文件需要指定不同的引擎名，入oracle、db2等</li>
<li>‘physical-path and filename.ext’: PC数据文件地址，文件名以及扩展名，置于引号中</li>
<li>SAS/ACCESS 连接选项，常用的如用户名，密码等，不同的DMBS数据文件会有所不同</li>
<li>SAS／ACCESS 逻辑库选项，控制SAS处理DBMS对象的方式，不同的DBMS数据文件会有所不同</li>
</ul>
</blockquote>
<p>⚠️SAS在读取Excel文件时，默认用前8行数据判定列的数据类型和长度。解决的办法是让SAS读入更多的数据行再确定数据类型，然而SAS未为Excel提供这样的选项。可以修改Windows注册表的Excel的TypeGuessRows的值为0，这样SAS会在读入所有行后再确定变量的类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">filename myexcel &quot;D:\Data\Raw|class.xlsx&quot;;</div><div class="line">prco import</div><div class="line">    datafile=myexcel dbms=excel out=myxls replace;</div><div class="line">range=&quot;&apos;sheet1$A1:E20&apos;n&quot;; ／*读入sheet1的A1-E20区域数据*／</div><div class="line">getnames=yes;</div><div class="line">run;</div><div class="line">proc import</div><div class="line">    datafile=myexcel dbms=excel out=myxls replace;</div><div class="line">dbdsopts=&quot;firstobs=3 obs=8&quot;; /*读入sheet1的3-8行区域数据*/</div><div class="line">getnames=yes;</div><div class="line">run;</div></pre></td></tr></table></figure>
<blockquote>
<h3 id="读入CSV文件"><a href="#读入CSV文件" class="headerlink" title="读入CSV文件"></a>读入CSV文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">filename mycsv &quot;D:\Data\Raw|class.csv&quot;;</div><div class="line">proc import </div><div class="line">    datafile=mycsv dbms=csv out=tmp replace;</div><div class="line">getnames=yes;</div><div class="line">guessingrows=20; /*通过前20行确定变量类型*/</div><div class="line">datarow=2; /*数据从第二行开始*/</div><div class="line">run;</div></pre></td></tr></table></figure>
<h3 id="读入TXT特殊字符分隔的文件"><a href="#读入TXT特殊字符分隔的文件" class="headerlink" title="读入TXT特殊字符分隔的文件"></a>读入TXT特殊字符分隔的文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">filename mytxttab &quot;D:\Data\Raw|class_tab.txt&quot;</div><div class="line">filename mytxtblk &quot;D:\Data\Raw|class_blk.txt&quot;</div><div class="line">proc import</div><div class="line">    datafile=mytxttab dbms=dlm out=tmp replace;</div><div class="line">delimiter=&apos;09&apos;x;</div><div class="line">getnames=yes;</div><div class="line">run;</div><div class="line">proc import</div><div class="line">    datafile=mytxtblk dbms=dlm out=tmp replace;</div><div class="line">delimiter=&apos;20&apos;x;</div><div class="line">getnames=yes;</div><div class="line">run;</div></pre></td></tr></table></figure>
<h3 id="INPUT语句列表读入式"><a href="#INPUT语句列表读入式" class="headerlink" title="INPUT语句列表读入式"></a>INPUT语句列表读入式</h3></blockquote>
<p>适合数据不齐整</p>
<p><strong>INPUT</strong> &lt;<em>pointer-control</em>&gt; variable &lt;$&gt; &lt;:|$|~&gt; &lt;<em>informat.</em>&gt; <a href="&#x6d;&#97;&#105;&#108;&#x74;&#x6f;&#x3a;&#x40;&#x7c;&#x40;&#x40;">&#x40;&#x7c;&#x40;&#x40;</a>;</p>
<ul>
<li>pointer-control: 控制变量读入点起始位置。针对行: #, /。针对列: @, +。</li>
<li>variable: 变量列表</li>
<li>$: 变量类型为字符型</li>
<li>:|$|~: 三个互斥点可选用格式修饰符<ul>
<li>: 读入点变量列上不齐整，读到空列、读完字符定义的长度或者数据行结尾时就算一个变量读完</li>
<li>&amp; 读入点字符变量包含不连续的空格</li>
<li>~ 读入其他分隔符分隔数据，字符变量引号，引号里有分隔符</li>
</ul>
</li>
<li>informat.: 输入格式<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">data tmp;</div><div class="line">input name : $13. gender $ age location $; /*:表示遇到空格或第13列，才读完name*/</div><div class="line">datalines;</div><div class="line">WYY M 25 Shanghai</div><div class="line">WuYuanyi M 25 Shanghai</div><div class="line">StatsThinking M 1 Beijing</div><div class="line">;</div><div class="line">run;</div><div class="line"></div><div class="line">data tmp;</div><div class="line">input name &amp; $9. gender $ age location $; /*一个空格不会认为变量结束*/</div><div class="line">datalines;</div><div class="line">W YY  M 25 Shanghai</div><div class="line">Wu Yuanyi  M 25 Shanghai</div><div class="line">;</div><div class="line">run;</div><div class="line"></div><div class="line">data tmp;</div><div class="line">infile datalines delimiter=&apos;,&apos;;</div><div class="line">input name &amp; $9. gender $ age location $ affiliation ~ $12.;</div><div class="line">datalines;</div><div class="line">YY WU,M,30,Shanghai,&quot;SHTU,SSIT&quot;</div><div class="line">Yuanyi Wu,M,30,Shanghai,&quot;SHTU,SSIT&quot;</div><div class="line">run;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<h3 id="INPUT语句列读入式"><a href="#INPUT语句列读入式" class="headerlink" title="INPUT语句列读入式"></a>INPUT语句列读入式</h3></blockquote>
<p>适合数据齐整的情况</p>
<p><strong>INPUT</strong> variable&lt;$&gt; start-column&lt;-end-column&gt; &lt;.decimals&gt; <a href="&#109;&#97;&#105;&#108;&#x74;&#x6f;&#x3a;&#x40;&#x7c;&#64;&#x40;">&#x40;&#x7c;&#64;&#x40;</a>;</p>
<ul>
<li>start-column&lt;-end-column&gt;: 变量读入点起止列</li>
<li>.decimals: 小数位数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">data tmp;</div><div class="line">input name $ 1-9 gender $ 11 age 13-14 location $ 16-23;</div><div class="line">YY Wu     M 25 Shanghai</div><div class="line">Yuanyi Wu M 25 Shanghai</div><div class="line">;</div><div class="line">run;</div></pre></td></tr></table></figure>
<blockquote>
<h3 id="INPUT语句格式读入式"><a href="#INPUT语句格式读入式" class="headerlink" title="INPUT语句格式读入式"></a>INPUT语句格式读入式</h3></blockquote>
<p>可以对字符变量指定宽度，以及读入非标准形式对数字，如科学计数法、带货币符号、带千分位等。</p>
<p><strong>INPUT</strong> &lt;<em>pointer-control</em>&gt; <em>variable</em> <em>informat.</em> <a href="&#109;&#97;&#105;&#x6c;&#x74;&#x6f;&#x3a;&#64;&#124;&#64;&#x40;">&#64;&#124;&#64;&#x40;</a>;<br><strong>INPUT</strong> &lt;<em>pointer-control</em>&gt; (<em>variable-list</em>) (<em>informat-list</em>) <a href="&#x6d;&#x61;&#105;&#108;&#116;&#x6f;&#x3a;&#64;&#x7c;&#x40;&#64;">&#64;&#x7c;&#x40;&#64;</a>;<br><strong>INPUY</strong> &lt;<em>pointer-control</em>&gt; (<em>variable-list</em>) (<em>\&lt;n\</em>&gt; informat.) <a href="&#109;&#97;&#x69;&#x6c;&#116;&#111;&#x3a;&#64;&#124;&#64;&#x40;">&#64;&#124;&#64;&#x40;</a>;</p>
<ul>
<li>(variable-list) (informat-list): 变量格式列表<ul>
<li>编号范围列表：形如x1,x2,x3可缩写为x1-xn</li>
<li>名称范围列表：x–a定义顺序从x到a的所有变量，x-numeric-a为x到a的所有数值型变量，x-character-ax到a的所有字符型变量</li>
<li>名称前缀列表：如x_1,x_2或x1,X2可简写成x:</li>
<li>特殊SAS名列表：_numerica_, _character_, _all_</li>
</ul>
</li>
<li>\<n\*\> informat.: 变量格式列表n表示格式重复的次数</n\*\></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">data tmp;</div><div class="line">/*gender虽然只有1列，但声明时要带上其后的一个空格，age，location类似*/</div><div class="line">input name &amp; $10. gender $2. age 3. location $8. fee comma6.;</div><div class="line">datalines;</div><div class="line">YY Wu  M 25 Shanghai 12,345</div><div class="line">Yuanyi Wu  M 25 Shanghai 54,321</div><div class="line">;</div><div class="line">run;</div></pre></td></tr></table></figure>
<blockquote>
<h3 id="INPUT语句命名读入式"><a href="#INPUT语句命名读入式" class="headerlink" title="INPUT语句命名读入式"></a>INPUT语句命名读入式</h3></blockquote>
<p><strong>INPUT</strong> &lt;<em>pointer-control</em>&gt; variable= &lt;$&gt; <a href="&#109;&#97;&#x69;&#x6c;&#x74;&#111;&#58;&#64;&#124;&#64;&#64;">&#64;&#124;&#64;&#64;</a>;<br><strong>INPUT</strong> &lt;<em>pointer-control</em>&gt; variable= informat. <a href="&#109;&#x61;&#105;&#108;&#x74;&#111;&#x3a;&#x40;&#x7c;&#x40;&#64;">&#x40;&#x7c;&#x40;&#64;</a>;<br><strong>INPUT</strong> variable= &lt;$&gt; start-column&lt;-end-column&gt; &lt;.decimals&gt; <a href="&#109;&#97;&#x69;&#108;&#x74;&#111;&#58;&#64;&#x7c;&#64;&#x40;">&#64;&#x7c;&#64;&#x40;</a>;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">data tmp;</div><div class="line">input name= $ gender= $ age= location=$;</div><div class="line">datalines;</div><div class="line">name=WYY gender=M age=25 location=Shanghai</div><div class="line">name=GY gender=F age=24 location=Shanghai</div><div class="line">;</div><div class="line">run;</div></pre></td></tr></table></figure>
<blockquote>
<h3 id="数据导出"><a href="#数据导出" class="headerlink" title="数据导出"></a>数据导出</h3></blockquote>
<p><strong>PROC EXPORT DATA</strong>=&lt;<em>libref.</em>&gt;<em>SAS data set</em>&lt;(<em>SAS data set options</em>)&gt;</p>
<p><strong>OUTFILE</strong>=”filename”|<strong>OUTTABLE</strong>=”tablename”</p>
<dbms=data-source-identifier>

<label>

<replace>

<p>\<file-format-specific-statements\>;</file-format-specific-statements\></p>
<p><strong>RUN</strong>;</p>
<ul>
<li>SAS data set: 欲输出的数据集</li>
<li>filename|tablename: 输出文件的地址名称</li>
<li>LABEL: 输出文件中输出变量名的标签</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">proc export</div><div class="line">    data=sashelp.class outfile=&apos;D:\Data\Raw|class.xlsx&apos;</div><div class="line">    dbms=excel replace;</div><div class="line">run;</div><div class="line"></div><div class="line">proc export</div><div class="line">    data=sashelp.class outfile=&apos;D:\Data\Raw|class_tab.txt&apos;</div><div class="line">    dbms=csv replace delimiter=&apos;09&apos;x;</div><div class="line">run;</div></pre></td></tr></table></figure>
<hr>
<h2 id="行舟来去泛纵横：变量观测"><a href="#行舟来去泛纵横：变量观测" class="headerlink" title="行舟来去泛纵横：变量观测"></a>行舟来去泛纵横：变量观测</h2><blockquote>
<h3 id="DATA-SET语句"><a href="#DATA-SET语句" class="headerlink" title="DATA+SET语句"></a>DATA+SET语句</h3></blockquote>
<p><strong>DATA</strong> &lt;<em>data-set-name-1</em> &lt;<em>data-set-options-1</em>&gt;&gt;  &lt;…<em>data-set-name-n</em> &lt;<em>data-set-options-n</em>&gt;&gt; &lt;/ \<debug> \<nesting> \<stack =="" *stack-size*="">&gt; \<nolist>;</nolist></stack></nesting></debug></p>
<p><strong>DATA</strong> _NULL_ &lt;/ \<debug\> \<nesting\> \<stack =="" *stack-size*\="">&gt; \<nolist\>;</nolist\></stack></nesting\></debug\></p>
<ul>
<li>data-set-name: 欲创建的SAS数据集名</li>
<li>data-set-options: 欲创建的SAS数据集的限制选项</li>
<li>DEBUG: 调试程序逻辑错误以及部分数据错误</li>
<li>NESTING: 日志中标记DO-END和SELECT-END语句的起止</li>
<li>STACK =: 可嵌套LINK语句个数</li>
<li>NOLIST: 出错时不在日志打印每个变量的值</li>
<li>_NULL_: 不建任何SAS数据集</li>
</ul>
<p>### </p>
</replace></label></dbms=data-source-identifier></dbms>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://wu-yuanyi.github.io/2017/06/16/study sas/" data-id="cj75j11q300071f4mduafpyyw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/08/01/mySQL grammar/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          MySQL grammer
        
      </div>
    </a>
  
  
    <a href="/2017/04/16/利用python 3进行数据分析/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">利用python 3.6进行数据分析</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/02/black production survey/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/08/01/Event tracking/">Event tracking</a>
          </li>
        
          <li>
            <a href="/2017/08/01/mySQL grammar/">MySQL grammer</a>
          </li>
        
          <li>
            <a href="/2017/06/16/study sas/">SAS学习心得</a>
          </li>
        
          <li>
            <a href="/2017/04/16/利用python 3进行数据分析/">利用python 3.6进行数据分析</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Yuanyi Wu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>