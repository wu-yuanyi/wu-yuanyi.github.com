<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="朝闻道 夕死可矣">
<meta property="og:type" content="website">
<meta property="og:title" content="WYY's Blog">
<meta property="og:url" content="http://wu-yuanyi.github.io/index.html">
<meta property="og:site_name" content="WYY's Blog">
<meta property="og:description" content="朝闻道 夕死可矣">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WYY's Blog">
<meta name="twitter:description" content="朝闻道 夕死可矣">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wu-yuanyi.github.io/"/>





  <title>WYY's Blog</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">WYY's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">JUST DO IT</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wu-yuanyi.github.io/2019/04/23/Health/健身餐/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuanyi Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYY's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/23/Health/健身餐/" itemprop="url">健身餐</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-23T22:32:53+08:00">
                2019-04-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Health/" itemprop="url" rel="index">
                    <span itemprop="name">Health</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>资料来源：<a href="https://weibo.com/378930807?from=myfollow_all" target="_blank" rel="external">营养师大王</a></p>
<h1 id="代餐"><a href="#代餐" class="headerlink" title="代餐"></a>代餐</h1><ul>
<li><p>年货 日本进口零食 水产北海道长脚即食蟹肉棒蟹肉卷手撕蟹柳15根【包邮】</p>
<p>【在售价】35.00元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eYXMRSv" target="_blank" rel="external">https://m.tb.cn/h.eYXMRSv</a></p>
<p>————————</p>
<p>复制这条信息，￥AxwdY0fvSDF￥，到【手机淘宝】即可查看</p>
</li>
<li><p>杨生记卤蛋30G*30袋 鸡蛋 泡面搭档 卤蛋  休闲零食</p>
<p>【在售价】36.00元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eYq77DT" target="_blank" rel="external">https://m.tb.cn/h.eYq77DT</a></p>
<p>————————</p>
<p>复制这条信息，￥tFxLY0fBuco￥，到【手机淘宝】即可查看</p>
</li>
<li><p>俄罗斯土豆泥粉进口方便食品早餐休闲宿舍速食代餐即食40g6杯桶装【包邮】</p>
<p>【在售价】33.80元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.ebtCZt0" target="_blank" rel="external">https://m.tb.cn/h.ebtCZt0</a></p>
<p>————————</p>
<p>复制这条信息，￥PBH4Y0fC1D8￥，到【手机淘宝】即可查看</p>
</li>
<li><p>6大袋 东北农嫂玉米粒罐头即食甜玉米粒水果玉米粒烙新鲜沙拉插条</p>
<p>【在售价】29.90元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eYq6jru" target="_blank" rel="external">https://m.tb.cn/h.eYq6jru</a></p>
<p>————————</p>
<p>复制这条信息，￥vLjmY0fDxWY￥，到【手机淘宝】即可查看</p>
</li>
<li><p>【Dole都乐】非转基因甜玉米粒30袋 水果型即食玉米 单袋约60g【包邮】</p>
<p>【在售价】139.00元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eY7v3Fk" target="_blank" rel="external">https://m.tb.cn/h.eY7v3Fk</a></p>
<p>————————</p>
<p>复制这条信息，￥zZ3QY0fDAK1￥，到【手机淘宝】即可查看</p>
</li>
<li><p>星派 真空小包装倒蒸红薯干1000g农家地瓜条软糯番薯干自制无糖精【包邮】</p>
<p>【在售价】26.90元</p>
<p>【券后价】23.90元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eYXpnwd" target="_blank" rel="external">https://m.tb.cn/h.eYXpnwd</a></p>
<p>————————</p>
<p>复制这条信息，￥poTEY0fwJkK￥，到【手机淘宝】即可查看</p>
</li>
<li><p>优追麦克斯特级原味鸡肉丸子80g1包代餐即食低脂肪高蛋白健身食品</p>
<p>【在售价】7.90元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eY7G8gI" target="_blank" rel="external">https://m.tb.cn/h.eY7G8gI</a></p>
<p>————————</p>
<p>复制这条信息，￥Ou9uY0fw4D8￥，到【手机淘宝】即可查看</p>
</li>
<li><p>三文鱼肠低脂肪火腿肠虾肠鳕鱼棒鱼肠卡热量健身代餐即食0零食品【包邮】</p>
<p>【在售价】46.80元</p>
<p>【券后价】41.80元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eYXLKdH" target="_blank" rel="external">https://m.tb.cn/h.eYXLKdH</a></p>
<p>————————</p>
<p>复制这条信息，￥B2PtY0fvHeV￥，到【手机淘宝】即可查看</p>
</li>
<li><p>健元堂三文鱼肠低脂火腿肠虾肠鳕鱼棒鱼肠运动健身代餐鱼类零食品【包邮】</p>
<p>【在售价】49.90元</p>
<p>【券后价】44.90元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eY70AEZ" target="_blank" rel="external">https://m.tb.cn/h.eY70AEZ</a></p>
<p>————————</p>
<p>复制这条信息，￥wQtZY0PsARo￥，到【手机淘宝】即可查看</p>
</li>
<li><p>预售【橙子快跑】水煮鸡胸肉健身代餐即食高蛋白健身食品8袋装【包邮】</p>
<p>【在售价】69.90元</p>
<p>【券后价】39.90元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eY04Ty4" target="_blank" rel="external">https://m.tb.cn/h.eY04Ty4</a></p>
<p>————————</p>
<p>复制这条信息，￥2UnjY0PxRbD￥，到【手机淘宝】即可查看</p>
</li>
<li><p>【20根】爆燃鸡胸肉肠健身即食刷脂餐轻食鸡肉肠健身零食多蛋白【包邮】</p>
<p>【在售价】49.60元</p>
<p>【券后价】39.60元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eYLWAUd" target="_blank" rel="external">https://m.tb.cn/h.eYLWAUd</a></p>
<p>————————</p>
<p>复制这条信息，￥mDS2Y0Pynv2￥，到【手机淘宝】即可查看</p>
</li>
<li><p>帕尼鸡肉肠60g*10根早餐火腿肠即食鲜美健身鸡肉网红休闲零食小吃</p>
<p>【在售价】30.00元</p>
<p>【下单链接】<a href="https://m.tb.cn/h.eY0TPFQ" target="_blank" rel="external">https://m.tb.cn/h.eY0TPFQ</a></p>
<p>————————</p>
<p>复制这条信息，￥qYCjY0PyNAn￥，到【手机淘宝】即可查看</p>
</li>
</ul>
<h1 id="食谱"><a href="#食谱" class="headerlink" title="食谱"></a>食谱</h1><p>以下表格中推荐的食物分量仅包括动物蛋白质，此外<strong>每天建议食用含15g蛋白质的豆制品</strong>。</p>
<ul>
<li>含5g蛋白质的低脂豆制品：水面筋（21g），烤麸（25g），豆腐干（31g），内脂豆腐（100g），豆浆（278g），豆腐皮（11g），北豆腐（41g），南豆腐（81g），豆腐脑（263g）。</li>
<li>含5g蛋白质的高脂豆制品：腐竹（11g），豆腐丝（23g），千张（20g），素火腿（26g），素鸡（30g），油豆腐（30g）。</li>
</ul>
<h2 id="900大卡"><a href="#900大卡" class="headerlink" title="900大卡"></a>900大卡</h2><table>
<thead>
<tr>
<th>餐次</th>
<th>就餐时间</th>
<th>果蔬</th>
<th>蛋白质</th>
<th>主食</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>早餐</td>
<td>6:30-8:30</td>
<td>0g</td>
<td>鸡蛋50g</td>
<td>杂粮0g</td>
<td>宜蒸煮，勿煎炒</td>
</tr>
<tr>
<td>加餐</td>
<td>餐后2-3h</td>
<td></td>
<td>牛奶200ml</td>
<td></td>
<td></td>
</tr>
<tr>
<td>午餐</td>
<td>11:30-13:30</td>
<td>200g</td>
<td>180g</td>
<td>杂粮30g</td>
<td>面制品生熟比1:2</td>
</tr>
<tr>
<td>加餐</td>
<td>餐后2-3h</td>
<td>水果100g</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>晚餐</td>
<td>18:00-20:00</td>
<td>100g</td>
<td>150g</td>
<td>杂粮20g</td>
<td>杂粮饭生熟比1:2</td>
</tr>
<tr>
<td>运动加餐</td>
<td>运动前1h</td>
<td>水果100g</td>
<td></td>
<td></td>
<td>心肺减脂训练</td>
</tr>
</tbody>
</table>
<h2 id="1300打卡"><a href="#1300打卡" class="headerlink" title="1300打卡"></a>1300打卡</h2><table>
<thead>
<tr>
<th>餐次</th>
<th>就餐时间</th>
<th>果蔬</th>
<th>蛋白质</th>
<th>主食</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>早餐</td>
<td>6:30-8:30</td>
<td>50g</td>
<td>鸡蛋50g</td>
<td>杂粮30g</td>
<td>宜蒸煮，勿煎炒</td>
</tr>
<tr>
<td>加餐</td>
<td>餐后2-3h</td>
<td></td>
<td>牛奶200ml</td>
<td></td>
<td></td>
</tr>
<tr>
<td>午餐</td>
<td>11:30-13:30</td>
<td>200g</td>
<td>200g</td>
<td>杂粮50g</td>
<td>面制品生熟比1:2</td>
</tr>
<tr>
<td>加餐</td>
<td>餐后2-3h</td>
<td>水果100g</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>晚餐</td>
<td>18:00-20:00</td>
<td>100g</td>
<td>180g</td>
<td>杂粮40g</td>
<td>杂粮饭生熟比1:2</td>
</tr>
<tr>
<td>运动加餐</td>
<td>运动前1h</td>
<td>水果100g</td>
<td></td>
<td></td>
<td>心肺减脂训练</td>
</tr>
</tbody>
</table>
<h1 id="分量说明"><a href="#分量说明" class="headerlink" title="分量说明"></a>分量说明</h1><p><img src="/Users/wuyuanyi/workspace/github/blog/source/_posts/Health/健身餐/howMuch1.jpeg" alt="每天吃这么多"></p>
<p><img src="/Users/wuyuanyi/workspace/github/blog/source/_posts/Health/健身餐/howMuch2.jpeg" alt="一掌与两指"></p>
<p><img src="/Users/wuyuanyi/workspace/github/blog/source/_posts/Health/健身餐/howMuch3.jpeg" alt="一把与一拳"></p>
<p><img src="/Users/wuyuanyi/workspace/github/blog/source/_posts/Health/健身餐/howMuch4.jpeg" alt="一大捧与一小捧"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wu-yuanyi.github.io/2019/04/08/DataAnalysis/逐步判别法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuanyi Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYY's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/08/DataAnalysis/逐步判别法/" itemprop="url">逐步判别法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-08T14:20:37+08:00">
                2019-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Regression-Methods/" itemprop="url" rel="index">
                    <span itemprop="name">Regression Methods</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>​    逐步判别法，也叫逐步回归过程（stepwise regression procedure），是一种建立回归模型的方法。从候选变量集合中添加或移除（以逐步的方式）进入模型，直到没有理由在模型中添加或移除任何变量。</p>
<h2 id="详细步骤"><a href="#详细步骤" class="headerlink" title="详细步骤"></a>详细步骤</h2><h3 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h3><p>​    设置逐步模型决定接受一个候选变量的显著性水平（significance level），称作Alpha-to-Enter显著性水平，记作𝜶<sub>E</sub>。设置从逐步模型中移除一个候选变量的显著性水平，称作Alpha-to-Remove显著性水平，记作𝜶<sub>R</sub>。</p>
<p>​    许多软件包都将𝜶<sub>E</sub>和𝜶<sub>R</sub>设置为0.15，而不是一般的0.05。使得候选变量不至于太难进入模型或者很容易地从模型中被剔除。</p>
<h3 id="步骤一"><a href="#步骤一" class="headerlink" title="步骤一"></a>步骤一</h3><ol>
<li>拟合每一个单预测因子模型，即在x<sub>1</sub>上回归y，在x<sub>2</sub>上回归y，…，在x<sub>p-1</sub>上回归y。</li>
<li>在那些t检验P值小于𝜶<sub>E</sub>=0.15的预测因子中，选择t检验P值最小的预测因子作为逐步模型中的第一个预测因子。</li>
<li>如果没有任何预测因子的t检验的P值低于𝜶<sub>E</sub>=0.15，则结束。</li>
</ol>
<h3 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h3><ol>
<li>假设x<sub>1</sub>具有最小的t检验的P值，且低于𝜶<sub>E</sub>=0.15，因此认为它是第一步产生的”最佳”单一预测因子。</li>
<li>拟合每个包含预测因子x<sub>1</sub>的双预测因子模型，即在x<sub>1</sub>和x<sub>2</sub>上回归y，在x<sub>1</sub>和x<sub>3</sub>上回归y，…，在x<sub>1</sub>和x<sub>p-1</sub>上回归y。</li>
<li>在这些t检验的P值低于𝜶<sub>E</sub>=0.15的预测因子中，选择t检验的P值最小的预测因子作为第二个预测因子加入模型。</li>
<li>如果没有预测因子t检验的P值低于𝜶<sub>E</sub>=0.15，则结束。模型仅有第一步中获得的一个预测因子。</li>
<li>否则，假设x<sub>2</sub>被认为是第二个”最佳”预测因子，因此将其加入模型。</li>
<li>现在，由于x<sub>1</sub>是模型中的预测因子，回退观察逐步模型中加入预测因子x<sub>2</sub>是否在某种程度上影响了预测因子x<sub>1</sub>的显著性。检查𝜷<sub>1</sub>=0时，t检验的P值。如果P值变得不显著，即P值大于𝜶<sub>R</sub>=0.15，将x<sub>1</sub>从逐步模型中移除。</li>
</ol>
<h3 id="步骤三"><a href="#步骤三" class="headerlink" title="步骤三"></a>步骤三</h3><ol>
<li>假设x<sub>1</sub>和x<sub>2</sub>入选了双预测因子模型，且未被剔除。</li>
<li>拟合每个包含预测因子x<sub>1</sub>和x<sub>2</sub>的三预测因子模型，即在x<sub>1</sub>，x<sub>2</sub>和x<sub>3</sub>上回归y，在x<sub>1</sub>，x<sub>2</sub>和x<sub>4</sub>上回归y，…，在x<sub>1</sub>，x<sub>2</sub>和x<sub>p-1</sub>上回归y。</li>
<li>在这些t检验的P值低于𝜶<sub>E</sub>=0.15的预测因子中，选择t检验的P值最小的预测因子作为第三个预测因子加入模型。</li>
<li>如果没有预测因子t检验的P值低于𝜶<sub>E</sub>=0.15，则结束。模型仅有前两步中获得的两个预测因子。</li>
<li>否则，假设x<sub>3</sub>被认为是第三个”最佳”预测因子，因此将其加入模型。</li>
<li>现在，由于x<sub>1</sub>和x<sub>2</sub>是模型中的预测因子，回退观察逐步模型中加入预测因子x<sub>3</sub>是否在某种程度上影响了预测因子x<sub>1</sub>和x<sub>2</sub>的显著性。检查𝜷<sub>1</sub>=0或𝜷<sub>2</sub>=0时，t检验的P值。如果P值变得不显著，即P值大于𝜶<sub>R</sub>=0.15，将x<sub>1</sub>或x<sub>2</sub>从逐步模型中移除。</li>
</ol>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p><a href="https://newonlinecourses.science.psu.edu/stat501/node/329/" target="_blank" rel="external">Stepwise Regression</a></p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>不保证最终模型在任何特定意义上是最佳的。（非最佳）</li>
<li>该程序产生一个最终模型，但一般还有几个同样好的模型。（非唯一）</li>
<li>逐步回归不考虑研究人员对预测因子的知识经验。也许将这些重要的预测因子加入模型是有必要的。</li>
<li>不应该对变量入模的顺序进行过度解读。</li>
<li>不应该得出这样的结论：所有预测y的重要的预测因子变量都被识别出，所有不重要的预测因子都被消除。这是两种在逐步回归过程中容易犯的错误。</li>
<li>由于逐步回归过程中包含了很多𝜷<sub>k</sub>=0的t检验，因此有很大的概率，我们选中了一些不重要的预测因或删除了一些重要的预测因子。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wu-yuanyi.github.io/2019/03/26/DataAnalysis/关系网络/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuanyi Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYY's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/26/DataAnalysis/关系网络/" itemprop="url">关系网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-26T16:25:29+08:00">
                2019-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Analysis/" itemprop="url" rel="index">
                    <span itemprop="name">Data Analysis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关联关系"><a href="#关联关系" class="headerlink" title="关联关系"></a>关联关系</h2><h3 id="关系说明"><a href="#关系说明" class="headerlink" title="关系说明"></a>关系说明</h3><table>
<thead>
<tr>
<th>关系类型</th>
<th>关系</th>
<th>关系说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>id_id</td>
<td>种子与关联ID相同</td>
</tr>
<tr>
<td>cellphone</td>
<td>cellphone_cellphone</td>
<td>种子与关联手机号相同</td>
</tr>
<tr>
<td>cellphone</td>
<td>cellphone_homephone</td>
<td>种子手机号=关联家庭电话</td>
</tr>
<tr>
<td>cellphone</td>
<td>cellphone_empphone</td>
<td>种子手机号=关联公司电话</td>
</tr>
<tr>
<td>cellphone</td>
<td>cellphone_c1phone</td>
<td>种子手机号=关联联系人1 电话</td>
</tr>
<tr>
<td>cellphone</td>
<td>cellphone_c2phone</td>
<td>种子手机号=关联联系人2 电话</td>
</tr>
<tr>
<td>cellphone</td>
<td>homephone_cellphone</td>
<td>种子家庭电话=关联手机号</td>
</tr>
<tr>
<td>cellphone</td>
<td>empphone_cellphone</td>
<td>种子公司电话=关联手机号</td>
</tr>
<tr>
<td>cellphone</td>
<td>c1phone_cellphone</td>
<td>种子联系人1 电话=关联手机号</td>
</tr>
<tr>
<td>cellphone</td>
<td>c2phone_cellphone</td>
<td>种子联系人2 电话=关联手机号</td>
</tr>
<tr>
<td>contact</td>
<td>c1phone_c1phone</td>
<td>种子联系人1 电话=关联联系人1 电话</td>
</tr>
<tr>
<td>contact</td>
<td>c1phone_c2phone</td>
<td>种子联系人1 电话=关联联系人2 电话</td>
</tr>
<tr>
<td>contact</td>
<td>c2phone_c1phone</td>
<td>种子联系人2 电话=关联联系人1 电话</td>
</tr>
<tr>
<td>contact</td>
<td>c1phone_c2phone</td>
<td>种子联系人2 电话=关联联系人2电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>homephone_homephone</td>
<td>种子家庭电话=关联家庭电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>homephone_empphone</td>
<td>种子家庭电话=关联公司电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>homephone_c1phone</td>
<td>种子家庭电话=关联联系人1 电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>homephone_c2phone</td>
<td>种子家庭电话=关联联系人2 电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>empphone_empphone</td>
<td>种子公司电话=关联公司电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>empphone_homephone</td>
<td>种子公司电话=关联家庭电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>empphone_c1phone</td>
<td>种子公司电话=关联联系人1 电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>empphone_c2phone</td>
<td>种子公司电话=关联联系人2电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>c1phone_homephone</td>
<td>种子联系人1 电话=关联家庭电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>c1phone_empphone</td>
<td>种子联系人1 电话=关联公司电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>c2phone_homephone</td>
<td>种子联系人2 电话=关联家庭电话</td>
</tr>
<tr>
<td>home/emp</td>
<td>c2phone_empphone</td>
<td>种子联系人2 电话=关联公司电话</td>
</tr>
</tbody>
</table>
<h3 id="关系网络"><a href="#关系网络" class="headerlink" title="关系网络"></a>关系网络</h3><table>
<thead>
<tr>
<th>一层关系类型</th>
<th>二层关系类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>cellphone</td>
</tr>
<tr>
<td>id</td>
<td>contact</td>
</tr>
<tr>
<td>id</td>
<td>home/emp</td>
</tr>
<tr>
<td>cellphone</td>
<td>id</td>
</tr>
<tr>
<td>cellphone</td>
<td>contact</td>
</tr>
<tr>
<td>cellphone</td>
<td>home/emp</td>
</tr>
</tbody>
</table>
<h2 id="网络属性"><a href="#网络属性" class="headerlink" title="网络属性"></a>网络属性</h2><h3 id="人群属性"><a href="#人群属性" class="headerlink" title="人群属性"></a>人群属性</h3><ul>
<li>年龄（按人去重，根据身份证计算当下年龄）：平均年龄；最大年龄；最小年龄；最大年龄差</li>
<li>性别（按人去重，根据身份证计算）：男性占比</li>
<li>省份：不同省份数，不同省份数/网络内不同人数</li>
<li>城市：不同城市数，不同数/网络内不同人数</li>
<li>城市等级：不同数量，占比，最大，最小，最大等级差，平均（去重）</li>
<li>区域分布</li>
<li>户籍城市等级</li>
<li>户籍区域分布</li>
<li>手机前两位 14、17数量，占比</li>
<li>手机相似：前7位、8位与本申请一致数量，占比；网络内前7位、8位一致数量的最大值，占比</li>
<li>联系人手机前两位 14、17数量，占比</li>
<li>联系人手机相似：前7位、8位与本申请一致数量，占比；网络内前7位、8位一致数量的最大值，占比</li>
<li>单位类型：学校、金融、信息技术、娱乐的占比</li>
<li>申请时间：白天、晚上、夜间申请人数，占比</li>
<li>平均时差：((最大-最小)/节点数)</li>
<li>申请类型：不同数量，占比，最大，最小，最大等级差</li>
</ul>
<h3 id="多机构属性"><a href="#多机构属性" class="headerlink" title="多机构属性"></a>多机构属性</h3><ul>
<li>总/线上/线下/信用卡/线上信用卡/线下信用卡/线上现金贷/线下现金贷/线上消费贷/线下消费贷/paydayloan</li>
<li>期限等级/利率等级/金额等级</li>
<li>统计申请数、机构数、人数</li>
<li>分母为人数的占比型变量</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wu-yuanyi.github.io/2019/01/17/DataAnalysis/决策树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuanyi Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYY's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/17/DataAnalysis/决策树/" itemprop="url">决策树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-17T16:34:05+08:00">
                2019-01-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Analysis/" itemprop="url" rel="index">
                    <span itemprop="name">Data Analysis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="决策树"><a href="#决策树" class="headerlink" title="决策树"></a>决策树</h2><p><a href="http://www.cnblogs.com/zhangchaoyang/articles/2709922.html" target="_blank" rel="external">参考1</a></p>
<p><a href="https://blog.csdn.net/hxcaifly/article/details/80203663" target="_blank" rel="external">参考2</a></p>
<p><a href="https://blog.csdn.net/hxcaifly/article/details/80203663" target="_blank" rel="external">参考3</a></p>
<p>​    决策树算法：利用自变量构造一颗二叉树，以区分出目标变量。决策树算法的要点如下：</p>
<ul>
<li><p>选择分裂属性：选择分叉的方式决定了决策树的算法类型，分为：</p>
<ul>
<li>ID3：采用信息增益来选择树叉</li>
<li>C4.5：采用增益率来选择树叉</li>
<li>CART：采用Gini系数来选择树叉</li>
</ul>
</li>
<li><p>剪枝：数据中的噪声和离群点会造成一些分枝反映的是训练数据中的异常。剪枝就是处理这种过拟合问题，有先剪枝和后剪枝两种方法。</p>
<p>以以下数据为例，介绍三种决策树：</p>
<p>| 客户ID | 故障原因 | 故障类型 | 修障时长 | 满意度 |<br>| —— | ——– | ——– | ——– | —— |<br>| 001    | 1        | 5        | 10       | 1      |<br>| 002    | 1        | 5        | 12       | 0      |<br>| 003    | 1        | 5        | 14       | 1      |<br>| 004    | 2        | 5        | 16       | 0      |<br>| 005    | 2        | 5        | 18       | 1      |<br>| 006    | 2        | 6        | 20       | 0      |<br>| 007    | 3        | 6        | 22       | 1      |<br>| 008    | 3        | 6        | 24       | 0      |<br>| 009    | 3        | 6        | 26       | 1      |<br>| 010    | 3        | 6        | 28       | 0      |</p>
</li>
</ul>
<p>​    目标变量满意度是二分类变量：满意（记为0）和不满意（记为1）；自变量是：故障原因（离散型），故障类型（离散型），修障时长（连续型）。</p>
<h2 id="ID3决策树"><a href="#ID3决策树" class="headerlink" title="ID3决策树"></a>ID3决策树</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>​    ID3算法选择具有最高信息增益的自变量作为当前的树叉，信息增益=原信息熵-按某自变量划分后信息熵。选取最大的信息增益率作为分裂属性。</p>
<p>​    D为目标变量，m为目标变量的种类；p<sub>i</sub>为每种目标变量对应的概率。原信息熵的计算公式如下：</p>
<p>$$ Entropy(D) = -\sum_{i=1}^m p_i*\log_2p_i ​$$</p>
<p>​    A表示按自变量A对目标变量D进行划分；V表示按自变量A划分后的子集数；|D<sub>j</sub>|/|D|表示子集j中样本所占总体的比例；Entropy(D<sub>j</sub>)表示子集j的信息熵。按某自变量A划分后信息熵计算公式如下：</p>
<p>$$ Entropy<em>A(D) = \sum</em>{j=1}^V \frac{|Dj|}{|D|} <em> Entropy(D<em>j) = - \sum</em>{j=1}^v\frac{|Dj|}{|D|} </em> \sum<em>{i=1}^m p</em>{ji}*\log<em>2p</em>{ji} ​$$</p>
<p>$$ Gain_A = Entropy(D) - Entropy_A(D) ​$$</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>以上述满意度数据为例，分别计算三个字变量的信息增益，选取其中最大的信息增益作为树叉。第一个树叉选择的计算过程如下：</p>
<ul>
<li>原信息熵：</li>
</ul>
<p>$$ Entropy(满意度) = - \frac{5}{10} <em> \log_2\frac{5}{10}  - \frac{5}{10} </em> \log_2\frac{5}{10} =1 $$</p>
<ul>
<li>按故障原因划分：</li>
</ul>
<p>$$ Entropy_{故障原因}(满意度) = - \frac{3}{10} <em>(\frac{2}{3}</em>\log_2\frac{2}{3}+\frac{1}{3}<em>\log_2\frac{1}{3}) - \frac{3}{10} </em>(\frac{1}{3}<em>\log_2\frac{1}{3}+\frac{2}{3}</em>\log_2\frac{2}{3}) - \frac{4}{10} <em>(\frac{2}{4}</em>\log_2\frac{2}{4}+\frac{2}{4}*\log_2\frac{2}{4}) = 0.95098 $$</p>
<p>信息增益为：1-0.95098=0.04902</p>
<ul>
<li>按故障类型划分：</li>
</ul>
<p>$$ Entropy_{故障类型}(满意度) = - \frac{5}{10} <em>(\frac{2}{5}</em>\log_2\frac{2}{5}+\frac{3}{5}<em>\log_2\frac{3}{5}) - \frac{5}{10} </em>(\frac{2}{5}<em>\log_2\frac{2}{5}+\frac{3}{5}</em>\log_2\frac{3}{5}) = 0.97095 $$</p>
<p>信息增益为：1-0.97095=0.02905</p>
<p>​    对于连续型变量，将其排序后，依次取相邻两值的中间值作为划分点后同离散型的方式进行计算。分别算得按各重点划分的信息增益，取信息增益最大的作为此连续变量的分叉。</p>
<ul>
<li>按修障时间划分：</li>
</ul>
<p>$$ Entropy_{11}(满意度) = - \frac{1}{10} <em>(\frac{1}{1}</em>\log_2\frac{1}{1}) - \frac{9}{10} <em>(\frac{4}{9}</em>\log_2\frac{4}{9}+\frac{5}{9}*\log_2\frac{5}{9}) = 0.89197 $$</p>
<p>$$Entropy_{13}(满意度) = - \frac{2}{10} <em>(\frac{1}{2}</em>\log_2\frac{1}{2}+\frac{1}{2}<em>\log_2\frac{1}{2}) - \frac{8}{10} </em>(\frac{4}{8}<em>\log_2\frac{4}{8}+\frac{4}{8}</em>\log_2\frac{4}{8}) = 1 $$</p>
<p>$$ Entropy_{15}(满意度) = - \frac{3}{10} <em>(\frac{2}{3}</em>\log_2\frac{2}{3}+\frac{1}{3}<em>\log_2\frac{1}{3}) - \frac{7}{10} </em>(\frac{4}{7}<em>\log_2\frac{4}{7}+\frac{3}{7}</em>\log_2\frac{3}{7}) =0.85262 $$</p>
<p>$$ Entropy_{17}(满意度) = - \frac{4}{10} <em>(\frac{2}{4}</em>\log_2\frac{2}{4}+\frac{2}{4}<em>\log_2\frac{2}{4}) - \frac{6}{10} </em>(\frac{3}{6}<em>\log_2\frac{3}{6}+\frac{3}{6}</em>\log_2\frac{3}{6}) =1 ​$$</p>
<p>$$ Entropy_{19}(满意度) = - \frac{5}{10} <em>(\frac{2}{5}</em>\log_2\frac{2}{5}+\frac{3}{5}<em>\log_2\frac{3}{5}) - \frac{5}{10} </em>(\frac{2}{5}<em>\log_2\frac{2}{5}+\frac{3}{5}</em>\log_2\frac{3}{5}) =0.97095 $$</p>
<p>选取最大的信息增益后，信息增益为：1-0.85262=0.14738</p>
<p>综上，第一层分叉选择修障时间（15为分界点）。</p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>​    倾向于选择具有大量值的属性。极端情况以客户ID为例，以此变量划分会得到每个划分中只有一个样本，即每个划分都是纯的，信息增益值为1。但是这种划分毫无意义。</p>
<h2 id="C4-5决策树"><a href="#C4-5决策树" class="headerlink" title="C4.5决策树"></a>C4.5决策树</h2><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><p>​    C4.5算法选择具有最高信息增益率的自变量作为当前的树叉。信息增益率 = 信息增益/划分的信息熵</p>
<p>​    划分的信息熵计算公式如下：</p>
<p>$$ SplitEntropy<em>A(D) = - \sum</em>{j=1}^V(\frac{|D_j|}{|D|}*\log_2\frac{|D_j|}{|D|}) $$</p>
<p>$$ GainRate_A(D) = \frac{Gain(A)}{SplitEntropy_A} $$</p>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><p>​    以上述满意度数据为例，分别计算三个字变量的信息增益率，选取其中最大的信息增益率作为树叉。第一个树叉选择的计算过程如下：</p>
<ul>
<li>按故障原因划分：</li>
</ul>
<p>$$ SplitEntropy_{故障原因}(满意度) = - \frac{3}{10}<em>\log_2\frac{3}{10}  - \frac{3}{10}</em>\log_2\frac{3}{10}  - \frac{4}{10}*\log_2\frac{4}{10} = 1.57095 $$</p>
<p>$$ GainRate_{故障原因} = \frac{0.04902}{1.57095} = 0.03120 $$</p>
<ul>
<li>按故障类型划分：</li>
</ul>
<p>$$ SplitEntropy_{故障原因}(满意度) = - \frac{5}{10}<em>\log_2\frac{5}{10}  - \frac{5}{10}</em>\log_2\frac{5}{10}  = 1 $$</p>
<p>$$ GainRate_{故障类型}  = \frac{0.02905}{1} = 0.02905 $$</p>
<ul>
<li>按修障时间分类：</li>
</ul>
<p>$$ SplitEntropy_{11}(满意度) = - \frac{1}{10}<em>\log_2\frac{1}{10} - \frac{9}{10}</em>\log_2\frac{9}{10} = 0.46900 $$</p>
<p>$$ GainRate_{修障时间11}  = \frac{1-0.89197}{0.46900} = 0.23034 $$</p>
<p>$$ SplitEntropy_{13}(满意度) = - \frac{2}{10}<em>\log_2\frac{2}{10} - \frac{8}{10}</em>\log_2\frac{8}{10} = 0.72193 ​$$</p>
<p>$$ GainRate_{修障时间13}  = \frac{1-1}{0.72893} = 0 $$</p>
<p>$$ SplitEntropy_{15}(满意度) = - \frac{3}{10}<em>\log_2\frac{3}{10} - \frac{7}{10}</em>\log_2\frac{7}{10} = 0.88129 $$</p>
<p>$$ GainRate_{修障时间15}  = \frac{1-0.85262}{0..88129} = 0.16723 $$</p>
<p>$$ SplitEntropy_{17}(满意度) = - \frac{4}{10}<em>\log_2\frac{4}{10} - \frac{6}{10}</em>\log_2\frac{6}{10} = 0.97095 $$</p>
<p>$$ GainRate_{修障时间17}  = \frac{1-1}{0.97095} = 0 $$</p>
<p>$$ SplitEntropy_{19}(满意度) = - \frac{5}{10}<em>\log_2\frac{5}{10} - \frac{5}{10}</em>\log_2\frac{5}{10} = 1 $$</p>
<p>$$ GainRate_{修障时间19}  = \frac{1-0.97095}{1} = 0.97095 $$</p>
<p>选取最大的信息增益率后，信息增益率为：0.23034</p>
<p>综上，第一层分叉选择修障时间（11为分界点）。</p>
<h2 id="CART决策树"><a href="#CART决策树" class="headerlink" title="CART决策树"></a>CART决策树</h2><h3 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h3><p>​    CART决策树选择基尼系数最小的属性作为树的分叉。CART决策树是一颗二叉树，因此每一个变量划分为两类。当此变量有多种方式划分两类时，计算所有划分的基尼系数，选取值最小的划分方式。为先计算不纯度，再计算基尼系数，公式如下：</p>
<p>$$ Gini(D) = 1- \sum_{i=1}^mp_i^2 $$</p>
<p>$$ GiniIndex<em>A(D) = \sum</em>{j=1}^V\frac{|D_j|}{|D|}*Gini(D_j) $$</p>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><ul>
<li><p>按故障类型划分，划分的方式有：{1, 2}与{3}，{1, 3}与{2}，{2, 3}与{1}</p>
<ul>
<li>{1,2}与{3}</li>
</ul>
<p>$$ GiniIndex = \frac{6}{10}<em>(1-(\frac{3}{6})^2 - (\frac{3}{6})^2) + \frac{4}{10}</em>(1-(\frac{3}{6})^2-(\frac{3}{6})^2) = 0.5 $$</p>
<ul>
<li>{1,3与}{2}</li>
</ul>
<p>$$ GiniIndex = \frac{7}{10}<em>(1-(\frac{4}{7})^2 - (\frac{3}{7})^2) + \frac{3}{10}</em>(1-(\frac{1}{3})^2-(\frac{2}{3})^2) = 0.47619 $$</p>
<ul>
<li>{2,3}与{1}</li>
</ul>
<p>$$ GiniIndex = \frac{7}{10}<em>(1-(\frac{3}{7})^2 - (\frac{4}{7})^2) + \frac{3}{10}</em>(1-(\frac{2}{3})^2-(\frac{1}{3})^2) = 0.47619 $$</p>
</li>
<li><p>按故障原因划分</p>
<p>$$ GiniIndex = \frac{5}{10} <em> (1-(\frac{3}{5})^2-(\frac{2}{5})^2) + \frac{5}{10} </em> (1-(\frac{2}{5})^2-(\frac{3}{5})^2) = 0.48 ​$$</p>
</li>
<li><p>G按修障时间划分</p>
</li>
</ul>
<p>$$ GiniIndex_{11} = \frac{1}{10}<em>(1-(\frac{1}{1})^2-(\frac{0}{1})^2) + \frac{9}{10}</em>(1-(\frac{5}{9})^2-(\frac{4}{9})^2) = 0.44444 $$</p>
<p>$$ GiniIndex_{13} = \frac{2}{10}<em>(1-(\frac{1}{2})^2-(\frac{1}{2})^2) + \frac{8}{10}</em>(1-(\frac{4}{8})^2-(\frac{4}{8})^2) = 0.5 $$</p>
<p>$$ GiniIndex_{15} = \frac{3}{10}<em>(1-(\frac{1}{3})^2-(\frac{2}{3})^2) + \frac{7}{10}</em>(1-(\frac{4}{7})^2-(\frac{3}{7})^2) = 0.47619 ​$$</p>
<p>$$ GiniIndex_{17} = \frac{4}{10}<em>(1-(\frac{2}{4})^2-(\frac{2}{4})^2) + \frac{6}{10}</em>(1-(\frac{3}{6})^2-(\frac{3}{6})^2) = 0.5 ​$$</p>
<p>$$ GiniIndex_{19} = \frac{5}{10}<em>(1-(\frac{3}{5})^2-(\frac{2}{5})^2) + \frac{5}{10}</em>(1-(\frac{2}{5})^2-(\frac{3}{5})^2) = 0.48 ​$$</p>
<p>综上，第一层分叉选择修障时间（11为分界点）。</p>
<h2 id="剪枝"><a href="#剪枝" class="headerlink" title="剪枝"></a>剪枝</h2><ul>
<li>前剪枝：通过提前停止树的构造，如通过在给定的节点不再分裂或划分训练元组的子集，而对树剪枝，一旦停止，则该节点成为叶子结点。在构造树是，可以使用统计显著性、信息增益等度量来评估分裂的优劣，如果划分一个节点的元组低于预定义阈值的分裂，则给定子集的进一步划分将停止。较高的阈值可能导致过分简化的树，较低的阈值可能导致过分复杂的树。</li>
<li>后剪枝：由完全生长的树剪去子树，通过删除节点的分支，并用叶子结点替换它而剪掉给定节点的子树，叶子结点用被替换的子树中最频繁的类标记。</li>
</ul>
<h3 id="代价复杂性剪枝"><a href="#代价复杂性剪枝" class="headerlink" title="代价复杂性剪枝"></a>代价复杂性剪枝</h3><p>计算表面误差率增益值α</p>
<p>$$ \alpha =  \frac{R<em>{(t)} - R(T</em>{t})}{|N_{T_t}| - 1}​$$</p>
<p>|N <sub>Tt</sub>| 是子树中包含的叶子节点个数</p>
<p>R(t)是如果被剪枝节点t的误差代价，R(t) = r(t)*p(t)</p>
<p>r(t)是节点t的误差率</p>
<p>p(t)是节点t上数据占所有数据的比例</p>
<p>R(Tt)是子树Tt的误差代价，如果该节点不被剪枝，它等于子树Tt上所有叶子节点的误差代价之和</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wu-yuanyi.github.io/2018/12/18/DataAnalysis/评分卡建模/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuanyi Wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYY's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/18/DataAnalysis/评分卡建模/" itemprop="url">评分卡建模</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-18T15:56:45+08:00">
                2018-12-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Analysis/" itemprop="url" rel="index">
                    <span itemprop="name">Data Analysis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="样本抽取和权重设置"><a href="#样本抽取和权重设置" class="headerlink" title="样本抽取和权重设置"></a>样本抽取和权重设置</h2><h3 id="样本抽样"><a href="#样本抽样" class="headerlink" title="样本抽样"></a>样本抽样</h3><p>​    <strong>好</strong>、<strong>坏</strong>各抽5000，<strong>不确定</strong>不参与建模（使特征区分更明显）。5000是业界建模的经验和惯例，当样本数不足5000或在5000左右时，全部参与建模。</p>
<p>采用分层随机抽样的方法。在数据量很大的情况下不抽样而使用全量数据进行建模会导致：程序缓慢、overfit。</p>
<h3 id="权重修正"><a href="#权重修正" class="headerlink" title="权重修正"></a>权重修正</h3><p>​    <strong>好</strong>的权重 = (<strong>好</strong> + <strong>不确定</strong>) / <strong>好</strong>。使得建模样本中的<strong>好</strong>在样本数量上可以代表全部样本的<strong>好</strong>和<strong>不确定</strong>。</p>
<h3 id="样本划分"><a href="#样本划分" class="headerlink" title="样本划分"></a>样本划分</h3><p>​    一般将样本以7:3划分为训练集和验证集。训练集中至少应有500个样本，才能建立较为稳定的模型。如果模型在训练集和验证集中的表现基本一致，则说明模型比较稳健。如果建模抽样中的<strong>坏</strong>样本数量不足（总共才500个左右），则全部参与训练，使用BootStrap方法进行重复抽样得到验证样本，并在验证样本集上使用BootStrap验证法评估模型表现。</p>
<p><a href="https://www.jianshu.com/p/708dff71df3a" target="_blank" rel="external">Bootstrap, Bagging, Boosting</a></p>
<h2 id="变量预筛选"><a href="#变量预筛选" class="headerlink" title="变量预筛选"></a>变量预筛选</h2><p>​    通过变量预筛选，可以降低变量个数，集中精力于质量较好的变量。</p>
<ul>
<li>业务角度：需要和机构业务人员及数据人员沟通讨论，对于质量较差的变量，不宜进入模型。</li>
<li>数据角度：通过数据描述性统计分析，计算变量缺失率。当模型有足够的变量可供挑选时，对缺失率高于95%对变量直接不予考虑。当变量不足时，缺失率高达99%对变量也可以加入候选清单，虽然缺失率这么高的变量一般最后不会入模。</li>
<li>其他角度：例如金额类变量、功能型变量通常不入模，但是金额之间的比值是可以考虑的。</li>
</ul>
<h2 id="变量取值分箱"><a href="#变量取值分箱" class="headerlink" title="变量取值分箱"></a>变量取值分箱</h2><h3 id="细分箱与粗分箱"><a href="#细分箱与粗分箱" class="headerlink" title="细分箱与粗分箱"></a>细分箱与粗分箱</h3><p>​    在模型开发过程中，需要对变量进行分箱，对于候选模型变量，变量取值分箱的步骤如下：</p>
<ol>
<li>细分箱（fine bining）：对连续变量平均细分成足够多的分箱，获取变量细分箱的WOE报告。</li>
<li>粗分箱（coarse bining）：依据细分箱的WOE报告，结合业务上对变量的理解和分箱合并规则（WOE损失最小），对分箱进行手工合并，获取候选变量的粗分箱WOE报告。</li>
</ol>
<p>​    通过分箱得到所有候选变量的WOE报告，从而获得每个变量取值的最佳分栏、每个栏位对于的证据权重（WOE）和此变量的信息值（IV）。由于后续步骤需要WOE无缺失才能进行，因此变量原始取值有缺失时，必须保证缺失值也有对应的WOE。如果一些分箱中没有<strong>好</strong>或<strong>坏</strong>导致无法计算此分箱的WOE，则需对此分箱进行调整或与其他分箱合并，以保证每个分箱都有WOE。</p>
<h3 id="变量分箱的一般原则"><a href="#变量分箱的一般原则" class="headerlink" title="变量分箱的一般原则"></a>变量分箱的一般原则</h3><ul>
<li>各分箱中的样本量不应过少，过少则不具有统计显著性，且不稳定。一般建议不低于全部样本的5%。</li>
<li>为能计算WOE，各分箱中应同时出现<strong>好</strong>和<strong>坏</strong>。若不满足，应将此分箱与其他分箱合并以满足。</li>
<li>WOE趋势应与业务角度一致，通常为直线型或U型（一般仅年龄）。对于有序型和区间型，如果趋势不单调，则通过合并分箱进行调整。</li>
<li>对于特殊取值，如<em>其他</em>、<em>逾期次数为0</em>等应单列分箱。</li>
<li>分箱数一般为3-6个，数量过少则区分不显著，数量过多则导致不稳定。</li>
<li>其他业务考虑，如<em>再婚</em>、<em>复婚</em>可与<em>已婚</em>合并。</li>
</ul>
<h3 id="无法遵循一般原则的情况"><a href="#无法遵循一般原则的情况" class="headerlink" title="无法遵循一般原则的情况"></a>无法遵循一般原则的情况</h3><ul>
<li>字符型变量的客观取值无法更改，难以保证至少分箱中含有5%的变量或分为3-6个分箱。有些取值就是很不相同不适合与其它取值合并且比例极少。例如<strong>职务</strong>，其中一些选项取值的比例非常少，如<em>局级</em>、<em>部级</em>职务在人群中比例远低于5%。如果和其他级别合并则体现不出不同职务之间的差别，变量作用降低。所以在保证WOE值单调、符合业务经验的情况下，可以将这些高级职务依然独立，能让最后的评分更分散一些。</li>
<li>机构希望最好分数更细分一些的时候，在保证WOE值单调的情况下，分箱可以更细一些。</li>
</ul>
<h3 id="变量分箱的步骤"><a href="#变量分箱的步骤" class="headerlink" title="变量分箱的步骤"></a>变量分箱的步骤</h3><ol>
<li><p>细分箱：</p>
<ul>
<li>数值型变量：按变量取值顺序排列，均匀分成10组。在取值边界尽量考虑业务解释进行取整，因此每组样本数可能略有波动。</li>
<li>字符型变量：对所有的字符值进行分箱，每个值作为一个单独的细分箱。</li>
</ul>
</li>
<li><p>对每个细分箱统计<strong>好账户</strong>和<strong>坏账户</strong>数，计算每个分箱的WOE值。计算公式如下：</p>
<p>$$WOE(j) = \ln(\cfrac{f_G(j)}{f_B(j)})$$</p>
<p>$$f_G(j)$$：$$g_i/G$$ 分箱j中<strong>好</strong>样本数占总样本中<strong>好</strong>样本数的比例</p>
<p>$$f_B(j)$$：$$b_i/B$$ 分箱j中<strong>坏</strong>样本数占总样本中<strong>坏</strong>样本数的比例</p>
<p>​    说明：该公式表示第j类中正常与违约的比率与整个样本中正常与违约的比率的比值的对数。因此，该公式主要衡量第j类对正常与违约比率的影响程度。</p>
</li>
<li><p>粗分箱：将WOE值相近的细分箱且有业务意义的细分箱合并为粗分箱。对于数值型变量，通常将相邻的细分箱合并；对于字符型变量，通常将同类细分箱合并。对于特殊值和缺失值等，一般会保留一个各自单独的粗分箱；结合实际情况，考虑特殊值与缺失值的产生原因与业务含义，分析与其他分箱合并后是否更合理。</p>
</li>
<li><p>分箱原则：</p>
<ol>
<li>WOE值是否单调（年龄除外）</li>
<li>分箱数量一般控制在4-5个以内，太多容易不稳定</li>
<li>每一个分箱的占比应当平均分配，不宜出现某个变量取值的占比过高或过低</li>
<li>容易被客户或客户经理操纵的变量（如贷款期限，这种变量虽然可以衡量客户的还款能力，但也容易受客户经理推荐激励的影响），变量足够时不建议入模。</li>
</ol>
<p>​    变量的分箱是模型开发最关键的步骤之一，粗分箱后的各个分箱的WOE值的增减趋势必须满足合理的业务解释，并能保持比较稳定的分布。粗分箱产生的WOE值将替代原始数据值进入接下来的模型优化步骤。粗分箱结束后将生成二维变量报告，以确保每个使用的变量既可以表现出清晰的分辨力，又符合业务逻辑。未能符合任何选择条件的变量都将被剔除，以有利于其他候选变量的进入。</p>
</li>
</ol>
<h3 id="IV"><a href="#IV" class="headerlink" title="IV"></a>IV</h3><p>​    信息值（Information Value）代表了同整个群体相比，某一特征变量在所有区间中的好和坏之间的比例是否存在差异。在一个互联网信贷金融机构风险管理比较成熟，数据收集比较完善，数据总体质量较为可信的情况下，一个变量的信息值一般在0.05以上，则认为这个变量对因变量有一定的区分能力。如果数据覆盖面与数据质量不够完善，可用的数据信息比较少，则对变量的信息值的阈值会有不同的考虑。</p>
<p>$$IV = \Sigma \lbrace (\cfrac{g_i}{G} - \cfrac{b_i}{B}) \ast \ln(\cfrac{g_i}{G}/\cfrac{b_i}{B})  \rbrace$$</p>
<p>$$g_i$$：变量第i 个分箱栏位中的好样本数</p>
<p>$$G$$：样本中好样本总数</p>
<p>$$b_i$$：变量第i 个分箱栏位中坏样本数</p>
<p>$$B$$：样本中坏样本总数</p>
<h2 id="变量再筛选"><a href="#变量再筛选" class="headerlink" title="变量再筛选"></a>变量再筛选</h2><h3 id="WOE值与IV"><a href="#WOE值与IV" class="headerlink" title="WOE值与IV"></a>WOE值与IV</h3><p>变量充足、好用的情况下，依据IV和WOE值趋势的一般剔除原则：</p>
<ul>
<li>IV&lt;0.01：原则上IV越大越好，但是不同互联网信贷金融机构数据情况不同，可选的变量也可能不同。所以没有IV值低于多少就不能用的严格标准，否则某些情况下IV过低就无法完成建模。一般而言，IV值不低于0.01。同一家信贷金融机构的不同产品的数据情况和好坏情况也可能不一致，所以不同评分卡模型也可以选择不同的阈值。若可成功入模的变量过少，可不依此条件剔除变量。</li>
<li>WOE值趋势与业务理解不一致的变量</li>
<li>集中度过高，如某一取值分箱的占比超过98%</li>
</ul>
<h3 id="逐步判别（Stepdisc）"><a href="#逐步判别（Stepdisc）" class="headerlink" title="逐步判别（Stepdisc）"></a>逐步判别（Stepdisc）</h3><p>​    在完成上述简单的变量筛选后，变量选择过程进入下一步骤：变量降维。从模型中没有变量开始，逐个引入变量，每增加一个变量后都要检查，用逐步判别的方法去除那些无助于模型预测能力的变量。当模型中所有变量符合标准而无其他变量符合进入的标准时，选择程序结束。一般在进行逐步判别程序（StepDisc Procedure）时，设定添加变量的置信水平（SLE）=0.15，去除变量的置信水平（SLS）=0.15。置信水平参数值越小，被选中的变量个数就会越少。</p>
<p>​    逐步判别程序的目的是从变量池内所有可能的变量中，初步确定最具预测能力的特征变量组合。在这一过程中，对每个可能进入模型的特征变量反复进行测试，以观察其辨别好坏记录的有效性。每次对一个新的变量反复进行测试，结果要么是此变量已无法再有区分的贡献性，要么是成为已选择的模型变量的一部分。该过程是基于对当前的特征变量充当因变量和模型中的其他变量当作随机变量进行协方差分析进行的。一旦不再有新变量进入模型或从模型中去除变量时，选择过程结束。保留下来的头部变量是最可能进入最终模型的候选特征变量。</p>
<p>​    逐步判别程序所选变量为模型最终变量的起点。通常情况下，会依据行业经验，将部分没有通过逐步判别筛选，但业务含义明显的字段也一并作为最终模型变量选择的起点。</p>
<p>​    以上所有的原则和步骤，除了WOE值趋势必须和业务理解、行业习惯一致是必须遵守的，其他是一般原则可以突破。在按照以上原则挑选的基础上，如果得到的变量不符合建模条件，有可能会返回<strong>变量再挑选</strong>这一步骤，再人工挑选一些原本未被选中的变量。例如：在经过前文各种筛选后可选变量很少的情况下，如不足50个变量，可以不进行逐步判别程序，直接跳往下一步逻辑回归进行回归检验；<em>性别</em>是常用的入模变量，即使其IV值小于0.02，但如果满足一切建模要求，并可以让评分更分散，也可以考虑入模。</p>
<h2 id="WOE值转换说明"><a href="#WOE值转换说明" class="headerlink" title="WOE值转换说明"></a>WOE值转换说明</h2><p>​    在逻辑回归建模时，使用的是变量值对应的WOE值，而不是变量的原始取值。不单单是被选中的变量，所有做过分箱的变量都会如此进行处理。以防选中的变量不满足建模条件时，需要人工调用其他最初始未被选中的变量时，需要重新转换WOE值。</p>
<p>​    例如，性别的原始取值是<strong>男</strong>、<strong>女</strong>，在WOE报告中对应的分别是<strong>-0.0334</strong>和<strong>0.1838</strong>。完成转换后，<strong>男</strong>、<strong>女</strong>的取值就会被<strong>-0.0334</strong>和<strong>0.1838</strong>替代。</p>
<h2 id="逻辑回归建模"><a href="#逻辑回归建模" class="headerlink" title="逻辑回归建模"></a>逻辑回归建模</h2><p>​    分为多重共线性检验和逻辑回归两个步骤，并不是所有通过初筛的变量都能通过这两步都校验，其最终结果通过最大似然估计值分析和方差膨胀分析两张参数结果表展现出来。从第一张表可以看到逻辑回归常数项及各入模字段的系数的估计值，从第二张表可以看到方差膨胀系数。</p>
<p>剔除变量的原则如下：</p>
<ul>
<li>回归系数为正的变量。随着变量的各个分箱的WOE值上升，其坏账率越低，这样才能符合业务逻辑，因此需要保证所有入模变量的回归系数均为负数。</li>
<li>P值太高的变量。P值一般不能高于0.10，当可入模变量过少时，可以放宽到0.15</li>
<li>相关性太高造成高VIF（方差膨胀系数）的变量。VIF一般不能大于10，最好不要超过4。对于多个高度相关的变量，保留业务上最有意义、最稳定、最可信的一个。</li>
<li>业务专家认为不适合入模的。如贷款用途，因为分箱可能不稳定，没有特别的规则，最终不考虑入模。</li>
<li>其他情况。考虑到入模变量维度的多样性，或者变量的直观业务意义，有时会将几个过于类似的变量替换掉1-2个，换上类似但是维度和角度不同的变量。</li>
</ul>
<h2 id="评分标准化说明"><a href="#评分标准化说明" class="headerlink" title="评分标准化说明"></a>评分标准化说明</h2><p>​    逻辑回归模型得到的是概率（违约概率估计），而最终实际实施时使用的是简单直观的评分。所以需要依据评分卡原理，将概率值标准化为分数值，在这个过程中还可以得到评分值表（即每个变量的各种取值得到多少分）。每个坏账率对应一个好坏比（$$odds=(1-p)/p$$，p为坏样本所占百分比）。</p>
<p>​    评分标准化需要三个参数：</p>
<ul>
<li>基准评分（points0）</li>
<li>基准好坏比(odds0)：在基准评分下，人群所对应的好坏比</li>
<li>好坏比加倍分值（PDO，Points to Double the Odds）：评分提高多少才能使其所对应的好坏比成为原来的两倍</li>
</ul>
<p>​    通过与基准评分作比较，可直观的得到标准化后评分所对应的odds。如校准后评分比基准分高PDO分，则其对应的odds为基准odds的两倍。</p>
<p>​    评分卡的分值刻度通过将分值表示为比率对数的线性表达式<em>score = A + B\</em>ln(odds)*，其中，A（称为补偿）和B（称为刻度）是常数。。</p>
<p>$$points0 = A + B*ln(odds0)​$$</p>
<p>$$points0 + PDO = A + B * ln(2odds0)​$$</p>
<p>$$B = PDO / ln(2)$$</p>
<p>$$A = points0 - B * ln(odds0)​$$</p>
<p>$$score = A + B * ln(odds) = A + B(w^Tx + b) = (A + Bb) + Bw<em>{11}x</em>{11} + Bw<em>{12}x</em>{12} +  … + Bw<em>{mn}x</em>{mn}​$$ </p>
<ul>
<li><p>好坏比率<em>odds=(1-p) / p​</em>为一个客户正常的估计概率与违约的估计概率的比率</p>
</li>
<li><p><em>ln(odds)</em>为逻辑回归的因变量，即<em>ln(odds)=w^Tx + b</em></p>
</li>
<li><p><em>points0</em>：基准评分</p>
</li>
<li><p><em>odds0​</em>：基准好坏比</p>
</li>
<li><p><em>PDO</em>：好坏比加翻倍的分值</p>
</li>
<li><p><em>x<sub>1</sub>… x<sub>m</sub></em>：逻辑回归的变量系数</p>
</li>
<li><p><em>w<sub>i</sub></em>：最终进入模型的自变量且已经转为WOE值</p>
</li>
<li><p><em>b</em>：逻辑回归的截距</p>
</li>
<li><p><em>Bw<sub>i</sub>x<sub>i</sub></em>为变量<em>x<sub>i</sub></em>对应的评分</p>
</li>
<li><p><em>(A - Bb)</em>：基础分（也可将基础分值平均分配给各个变量）</p>
</li>
</ul>
<p><strong>公式中的加减号有待纠正</strong></p>
<table>
<thead>
<tr>
<th>变量</th>
<th>行数（分段或降维结果）</th>
<th>分值</th>
</tr>
</thead>
<tbody>
<tr>
<td>基准点</td>
<td></td>
<td>A + Bb</td>
</tr>
<tr>
<td>x<sub>1</sub></td>
<td>1</td>
<td>Bw<sub>11</sub>x<sub>11</sub></td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>Bw<sub>12</sub>x<sub>12</sub></td>
</tr>
<tr>
<td></td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td></td>
<td>k<sub>1</sub></td>
<td>Bw<sub>1k1</sub>x<sub>1k1</sub></td>
</tr>
<tr>
<td>x<sub>2</sub></td>
<td>1</td>
<td>Bw<sub>21</sub>x<sub>21</sub></td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>Bw<sub>22</sub>x<sub>22</sub></td>
</tr>
<tr>
<td></td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td></td>
<td>k<sub>2</sub></td>
<td>Bw<sub>2k2</sub>x<sub>2k2</sub></td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>x<sub>n</sub></td>
<td>1</td>
<td>Bw<sub>n1</sub>x<sub>n1</sub></td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>Bw<sub>n2</sub>x<sub>n2</sub></td>
</tr>
<tr>
<td></td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td></td>
<td>k<sub>n</sub></td>
<td>Bw<sub>2kn</sub>x<sub>2kn</sub></td>
</tr>
</tbody>
</table>
<h2 id="模型表现评估说明"><a href="#模型表现评估说明" class="headerlink" title="模型表现评估说明"></a>模型表现评估说明</h2><h3 id="模型表现评估指标"><a href="#模型表现评估指标" class="headerlink" title="模型表现评估指标"></a>模型表现评估指标</h3><p>​    国内一般重点看KS（Kolmogorov-Smirnov）和Gini系数这两个统计值。这两个指标在合理范围内越高，表明模型的区分能力越强。同时，模型还可以通过Divergence（离散度）、AUC（Area under Curve），ROC（Receiver Operating Characteristic）的值和图形进行评估。以上评估值都是越高越好，但是要在合理的范围内。如果过高，可能是因为过拟合或者特殊数据造成的。</p>
<p>​    由于KS的值，和模型的类型、数据质量、客户群体特征都有很大关系，所以能接受的合理范围也有所不同。其他指标一般无明确划分点。</p>
<table>
<thead>
<tr>
<th>K-S值</th>
<th>申请（好坏区分能力）</th>
<th>行为（好坏区分能力）</th>
</tr>
</thead>
<tbody>
<tr>
<td>20以下</td>
<td><strong>不建议采用</strong> 因为表现期不足，模型验证或上线初期可能会在这个范围。</td>
<td><strong>不建议采用</strong> 因为表现期不足，模型验证或上线初期可能会在这个范围。</td>
</tr>
<tr>
<td>20-29</td>
<td><strong>较好</strong> 在没有人行报告或其他强外部数据的情况下，如果申请数据质量不理想，贷款和信用卡模型都容易落在此区间。</td>
<td><strong>较弱</strong> 在还款和逾期历史数据都较弱（先息后本或一次性还款）的情况下，可用变量很少，贷款和信用卡模型都容易落在此区间。</td>
</tr>
<tr>
<td>30-49</td>
<td><strong>良好</strong> 在没有人行报告或其他强外部数据的情况下，如果申请数据质量很好，贷款和信用卡模型都容易落在此区间。</td>
<td><strong>较好</strong> 在还款和逾期历史数据都较弱（逾期账户极少）的情况下，可用变量不强，贷款和信用卡模型都容易落在此区间。</td>
</tr>
<tr>
<td>40-55</td>
<td><strong>很强</strong> 有人行征信等外部数据切申请数据质量很好，模型一般落在此区间。</td>
<td><strong>良好</strong> 大部分贷款和信用卡模型都容易落在此区间。</td>
</tr>
<tr>
<td>56-75</td>
<td><strong>非常强</strong> 很少见，能力高但疑似过拟合，可能放了过多征信报告中的逾期变量。</td>
<td><strong>很强</strong> 很少见，能力高但疑似过拟合，可能放了过多征信报告中的逾期变量。</td>
</tr>
<tr>
<td>75以上</td>
<td>极少见 能力高但疑似过拟合。</td>
<td><strong>非常强</strong> 很少见，能力高但疑似过拟合。</td>
</tr>
</tbody>
</table>
<h3 id="模型表现评估图表"><a href="#模型表现评估图表" class="headerlink" title="模型表现评估图表"></a>模型表现评估图表</h3><p>​    模型的评分排序表（Score Chart）就是将建模开发样本的评分从低到高排序，显示每个评分上的好坏个数，好坏比例以及坏账率等。详细的排序表不对评分进行组合；综合的排序表对评分进行组合，按照评分从低分区间到高分区间将建模开发样本账户等分为5-10组（每组账户比例大致相等）之后，区间坏账率也是从低分区间到高分区间单调下降，以说明模型等排序性强弱。</p>
<h2 id="模型的验证说明"><a href="#模型的验证说明" class="headerlink" title="模型的验证说明"></a>模型的验证说明</h2><p>根据验证样本的时间段不同，模型验证及其样本可以分为以下三类：</p>
<ul>
<li>开发期预留样本验证（时间内样本验证，Hold-Out Testing）。对Testing样本的验证要求一般是需要其入模变量趋势稳定，模型的极大评估指标稳定。当无法预留此样本时，可以采取Bootstrap法来造出样本进行验证。</li>
<li>时间外样本验证（Out-Of-Time，一般是比开发样本更晚更新的数据）。在表现期不足的情况下，不要求OOT样本上模型的几大评估指标稳定或者更好，而多是检查模型的排序性和稳定性。一般通过评分排序表、入模变量的PSI值和评分排序的PSI值来评估，样本中好坏不确定不需要抽样。如果有足够多表现充足的时间外验证样本，在坏样本比较多的情况下，可以希望其评分后的模型评估指标较好、稳定或更好。</li>
<li>上线后跟踪验证（Go-Online，上线后获取的数据）。一般在模型一期开发阶段没有这些数据，所以不会进行。上线后跟踪新账户一般表现期都不够，一开始不能要求模型的几大评估指标稳定或者更好，而多是检查模型的排序性和稳定性，一般通过入模变量的PSI值和评分排序的PSI值来实现。应用上线后，更看重的是评分保持排序性，积累到表现期足够后可以希望其评分后的模型评估指标较好、稳定或更好。</li>
</ul>
<p>模型具体的验证方法和指标分为以下几类：</p>
<ul>
<li><p>标准验证：KS，Gini系数、ROC、AUC和评分排序性等，需要样本的表现期充足。</p>
</li>
<li><p>BootStrap：从建模开发样本中有放回的随机抽样出1000-5000个样本（无需按好坏分层抽）组成一个数据集，计算其模型评分值，依据评分和好坏计算模型评估指标，一般主要看KS。可以如此反复抽10-100次，最后得到一个平均值，和模型开发样本的评估指标进行比较，若接近则验证通过。</p>
</li>
<li><p>稳定性验证：看每个入模变量的PSI、整体评分的PSI、评分的排序性。理想的PSI小于0.1，政策、客户和数据的变化最容易导致PSI变大，其标准见下表：</p>
<p>| PSI      | 结果               |<br>| ——– | —————— |<br>| <0.1 |="" 正常="" 0.1-0.25="" 需要关注，找出原因="">0.25    | 重大变化，找出原因 |</0.1></p>
</li>
</ul>
<h2 id="模型评估参数"><a href="#模型评估参数" class="headerlink" title="模型评估参数"></a>模型评估参数</h2><h3 id="K-S值"><a href="#K-S值" class="headerlink" title="K-S值"></a>K-S值</h3><p>​    K-S值用来衡量模型区分好坏的能力，即模型的预测能力。K-S的值由多种因素决定，如：数据源和数据信息的可获取度、数据的质量、产品类型、群体的稳定性。该指标衡量的是<strong>好</strong>和<strong>坏</strong>的累积分布之间最大的差距。好账户与坏账户分布之间的差异越大，K-S指标越高，模型的区分能力越强。但K-S值不是越高越好，太高容易出现过拟合或是由特殊数据造成。</p>
<h3 id="Gini系数"><a href="#Gini系数" class="headerlink" title="Gini系数"></a>Gini系数</h3><p>​    Gini系数用来衡量模型的区分能力，Gini系数越高，表明模型的排序能力越强。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <p class="site-author-name" itemprop="name">Yuanyi Wu</p>
            <p class="site-description motion-element" itemprop="description">朝闻道 夕死可矣</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wu-yuanyi" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/yuanyi.wu.39" target="_blank" title="FB Page">
                  
                    <i class="fa fa-fw fa-facebook"></i>FB Page</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuanyi Wu</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">Theme &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
